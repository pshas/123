–û—Ç–ª–∏—á–Ω–æ, —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø—Ä–∏—á–∏–Ω—É:

```
Call to undefined method Bitrix\Disk\File::getViewUrl()
```

---

## üí° –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç

–í –º–æ–¥—É–ª–µ **Bitrix\Disk** –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ **–Ω–µ—Ç –º–µ—Ç–æ–¥–∞ `getViewUrl()`** —É –∫–ª–∞—Å—Å–∞ `Bitrix\Disk\File`.
–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ —è –ø—Ä–µ–¥–ª–æ–∂–∏–ª –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ REST-–æ–±—ä–µ–∫—Ç–∞—Ö –î–∏—Å–∫–∞, –Ω–æ **–Ω–µ –≤ D7-PHP-API**.

–ù–∞ –∫–æ—Ä–æ–±–∫–µ D7-—Ñ–∞–π–ª—ã –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL —Å–∞–º–∏ –ø–æ —Å–µ–±–µ ‚Äî —Å—Å—ã–ª–∫—É –Ω—É–∂–Ω–æ **—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é**, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ `getDownloadUrl()` –∏–ª–∏ `getExternalLink()`.

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞ (class.php)

–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É –æ–∫–æ–ª–æ **132** –≤ —Ç–≤–æ—ë–º `class.php` –∏ –∑–∞–º–µ–Ω–∏ –≤–æ—Ç —ç—Ç—É —á–∞—Å—Ç—å:

```php
'URL' => $obj instanceof Disk\File
    ? $obj->getViewUrl()
    : $APPLICATION->GetCurPageParam("folder=".$obj->getId(), ['folder']),
```

–Ω–∞ –≤–æ—Ç —Ç–∞–∫—É—é:

```php
'URL' => $obj instanceof Disk\File
    ? $obj->getDownloadUrl()
    : $APPLICATION->GetCurPageParam("folder=".$obj->getId(), ['folder']),
```

---

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã–≤–∞–ª–∞—Å—å **–ø—Ä–æ—Å–º–æ—Ç—Ä/–≤–µ–±-—Å—Å—ã–ª–∫–∞**, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `getExternalLink()`:

```php
$link = $obj->addExternalLink([
    'CREATED_BY' => $GLOBALS['USER']->GetID(),
    'OBJECT_ID' => $obj->getId(),
]);
$url = $link ? $link->getDownloadUrl() : $obj->getDownloadUrl();
```

–¢–æ–≥–¥–∞ —É —Ç–µ–±—è –±—É–¥–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∞—è –ø—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞ (–µ—Å–ª–∏ –ø—Ä–∞–≤–∞ –ø–æ–∑–≤–æ–ª—è—é—Ç).

---

## üí¨ –ü–æ—á–µ–º—É —Ç–∞–∫

* –ú–µ—Ç–æ–¥ `getViewUrl()` –µ—Å—Ç—å –≤ JS-REST (–≤ –æ–±–ª–∞–∫–µ) ‚Äî –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL-–≤—å—é—Ö—É.
* –í –∫–æ—Ä–æ–±–∫–µ, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —á–µ—Ä–µ–∑ PHP D7-–æ–±—ä–µ–∫—Ç—ã, —Ç–∞–∫–∏—Ö URL –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
* –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `getDownloadUrl()` (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ D7) –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ —á–µ—Ä–µ–∑ `addExternalLink()`.

---

## ‚úÖ –ö–æ—Ä–æ—Ç–∫–æ

| –ë—ã–ª–æ                 | –û—à–∏–±–∫–∞                   | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞             |
| -------------------- | ------------------------ | ------------------------ |
| `$obj->getViewUrl()` | ‚ùå –ù–µ—Ç —Ç–∞–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≤ D7 | `$obj->getDownloadUrl()` |

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤ —à–∞–±–ª–æ–Ω –∫–Ω–æ–ø–∫—É **¬´–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É¬ª** –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é `ExternalLink`, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –¥–µ–ª–∏—Ç—å—Å—è —Ñ–∞–π–ª–∞–º–∏ –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.
–î–æ–±–∞–≤–∏–º —ç—Ç–æ –ø—Ä—è–º–æ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Äî —Ö–æ—á–µ—à—å?
