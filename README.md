Отлично, вот структурированный список вопросов для вендора по настройке Git/репозиториев с учётом ваших **двух дублирующих файловых серверов**, а также рекомендованные пункты, которые стоит заранее уточнить. Всё сформулировано так, чтобы их ответы можно было сразу превратить в рабочий план.

# 1) Архитектура и размещение

* Где будет «истина» кода: **GitLab (self-hosted/gitlab.gaz.ru)** как центральный удалённый, а файловые сервера — только для выката/кэша, или предполагается **по bare-репо** на каждом файловом сервере?
* Если 2 сервера дублируются: нужна ли **зеркализация репо** между ними (mirror push/pull)? Какая схема отказоустойчивости и переключения?
* Какие протоколы использовать: **SSH** или **HTTPS** (PAT)? Есть ли требования по прокси/брандмауэрам/портам?
* Предоставят ли вендор **схему/диаграмму** потоков: dev → GitLab → (CI/CD) → сервера А/В?

# 2) Доступ и аутентификация

* Интеграция с **AD/LDAP/SSO** (SAML/OAuth) для единых учёток?
* Будут ли использоваться **деплой-ключи**/deploy tokens для серверов А/В (чтобы тянуть код без персональных аккаунтов)?
* Политики прав: кто может **push**, кто может **merge**, кто может администрировать репо/группы?

# 3) Стандарты по репозиториям

* Рекомендуемая структура: **монорепо** или несколько сервисных репо? Критерии выбора.
* **Ограничения на размер** репозитория/истории, максимальный размер файла.
* Использовать ли **Git LFS** для бинарей (медиа, большие артефакты)? Если да — кто и как настраивает серверную часть.
* Политики **консервации/архивации** старых репо.

# 4) .gitignore / .gitattributes / форматирование

* Дадут ли **базовый .gitignore** для нашего стека (Node/Java/Python/PHP/1C/Bitrix и т.п.)? Нужна ли специфика под CI/IDE.
* Политика **.gitattributes**: нормализация переводов строк (`* text=auto`), бинарные типы, merge-драйверы для специфичных форматов.
* Требуются ли **prettier/eslint/editorconfig**/style-гайды и кто их поддерживает.

> Пример минимального старта (попросите вендора дополнить под ваш стек):

```
# базовое
.DS_Store
Thumbs.db
*.log
logs/
tmp/
.cache/

# IDE
.vscode/
.idea/
*.iml

# зависимости/сборка
node_modules/
dist/
build/
vendor/

# env/секреты
.env
.env.*
```

# 5) Git-workflow и политика ветвления

* Какой **workflow**: GitFlow, trunk-based, GitHub-flow? Нужны ли релизные ветки (`release/*`)?
* Политика **protected branches**: `main`/`master` защищены? Разрешён ли прямой push?
* Стратегии merge: **merge commit / squash / rebase**. Что по умолчанию?
* Шаблоны **MR/PR** (темплейты), чек-листы, обязательные ревью/апрувы.
* Конвенции коммитов (**Conventional Commits**, ссылки на задачи, требования к сообщениям).

# 6) Хуки и проверки качества

* Какие **pre-receive / server-side hooks** планируются: запрет секретов, линтеры, блок по размеру файла, проверка веток, обязательные теги версии?
* Интеграция **secret scanning** (trufflehog/встроенное), SAST/Dependency scanning.
* Требуется ли **подпись коммитов** (GPG/SSH signing) и валидация на сервере?

# 7) CI/CD и выкаты на два сервера

* Где крутятся **GitLab Runners** (shared vs dedicated, на каких ОС, с какими executor’ами)?
* Как именно код попадает на **сервер А** и **сервер B**: `git pull`, rsync артефактов, контейнеры, Ansible?
* Нужны ли **разные окружения** (dev/stage/prod), условия ручного аппрува, стратегии blue/green/rolling?
* Как организовать **параллельный** или **последовательный** деплой на два дублирующих сервера? Что считается «истиной» артефактов?
* Где и как хранить **секреты** (CI/CD variables, Vault)? Кто управляет ротацией?

# 8) Переключение между серверами (операционка)

* Предпочтительный способ: один `origin` + второй как **backup** remote, или два push-URL у одного `origin`?
* Описанный/скриптованный **runbook**: как быстро переключить fetch/push на сервер B (команды `git remote set-url`, зеркалирование, критерии возврата).
* Как синхронизируются **tags/releases** между серверами?

# 9) Производительность и обслуживание

* Рекомендации по **gc/prune/repack**, auto-maintenance, ограничения history-depth (shallow clone) в CI.
* Как работать при **медленных сетях/SMB-шарах**: локальные клоны vs работа по сетевому диску.
* Мониторинг GitLab/репо, **алерты**, метрики, **логирование**.

# 10) Резервное копирование и DR

* Что бэкапим: репо, LFS, настройки, раннеры, переменные CI/CD, контейнерный реестр.
* Периодичность, **RPO/RTO**, тесты восстановлений (DR-дрили), порядок действий при падении одного из файловых серверов.
* Кто отвечает за **восстановление зеркал** и как проверяется целостность.

# 11) Безопасность и соответствие

* Политики retention, доступов, **аудит** (кто пушил/мерджил), хранение логов.
* Минимальные scope’ы **PAT** (если используется HTTPS), запреты на бессрочные токены.
* Требования со стороны комплаенса (PCI/ISO/внутр. регламенты).

# 12) Документация, обучение и поддержка

* Предоставят ли **конкретные инструкции** для девов (VS Code, GitLab Workflow, SSH-ключи, PAT), шаблоны `.gitignore`, MR-темплейты.
* **SLA поддержки**, канал эскалации, время реакции.
* План **миграции** (если переносим существующий код/историю).

---

## Что попросить «вышло из коробки»

1. **Базовый шаблон проекта** с:

   * `README.md` (как собрать/запустить/деплоить),
   * корректным `.gitignore` под наш стек,
   * `.gitattributes` (строки/бинарные),
   * шаблоном MR/PR ( `.gitlab/merge_request_templates/...` ),
   * базовым пайплайном `.gitlab-ci.yml` (линтеры, тесты, сборка, деплой на сервера А/В),
   * включёнными protected branches и минимальными правилами ревью.
2. **Скрипты/инструкции** для первой синхронизации двух серверов (mirror/reseed), rollback-процедуры.
3. **Диаграмма потоков** и **runbook** на случай аварий/переключения.

---

## Что мы готовы уточнить (контекст для вендора)

* Стек технологий (чтобы под этот стек собрали .gitignore/.gitattributes/CI).
* Роли участников (кто dev/lead/devops).
* Режим дубликатов серверов (актив-актив или актив-пасив) и требования к переключению.

Если хотите, я превращу это в письмо/бриф для вендора или чек-лист (Markdown) — скажите формат (одно письмо, .md-док, или чек-лист для Confluence/Notion).
